<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <link href="/m.css" rel="stylesheet" type="text/css">
    <meta content="@FMWTK_SITE_NAME@" name="author">
    <meta content="width=device-width, height=device-height, user-scalable=yes" name="viewport">
    <meta name="generator" content="Futuramerlin Web Toolkit @FMWTK_VERSION@" />
    <title>@FMWTK_SITE_NAME@</title>

    <!-- third-party code: CSV parser -->
    <script src="papaparse.js" type="text/javascript"></script>

    <!-- Merged EITE implementation, including StageL and StageR -->
    <script src="eite.js" type="text/javascript"></script>

    <!-- And the code specific to this page -->
    <script>
        // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-3.0

        window.onload = function() {
        };

        async function RunDocumentHandler() {
            document.getElementById('inputarea').disabled=true;
            document.getElementById('UploadDocument').disabled=true;
            document.getElementById('DownloadDocument').disabled=true;
            document.getElementById('RunDocument').disabled=true;
            document.getElementById('eiteDocumentRoot').innerHTML='<div class="loadingSpinner" style="background-color:#e3cdab;"></div>';
            document.getElementById('eiteDocumentRoot').style.backgroundColor='#e3cdab';
            await runDocument(await importDocument('sems', await strToByteArray(document.getElementById('inputarea').value)));
            document.getElementById('eiteDocumentRoot').style.backgroundColor=white;
            document.getElementById('inputarea').disabled=false;
            document.getElementById('UploadDocument').disabled=false;
            document.getElementById('DownloadDocument').disabled=false;
            document.getElementById('RunDocument').disabled=false;
        };

        function UploadDocument() {
        };

        function DownloadDocument() {
        };

        // @license-end
    </script>
    <style>
        .loadingSpinner {
            position: relative;
        }
        #mainBox {
            display:flex;height:100vh;width:100vw;position:fixed;top:0;left:0;
        }
        #DcSelection {
            background:antiquewhite;
        }
        #editorColumn {
            display:flex;flex-direction:column;
        }
        #editorButtons {
            display:flex;flex-direction:row;
        }
        #editorButtons > button {
            width: 100%;
        }
        #mainBox > div, #mainBox > p, #inputarea {
            height: 100%;
            width: 100%;
        }
        #eiteDocumentRoot {
            border: 0.5rem solid black;background-color:white;font-size: 3rem;
        }
    </style>
</head>
<body>
<h1>IT environment: edit document tool</h1>

<p class="breadcrumbs">Page location:
    <span><a href="/">Home</a></span>
</p>
<section id="mainBox">
    <div id="DcSelection"></div>
    <div id="editorColumn">
        <textarea id="inputarea"></textarea>
        <div id="editorButtons">
            <button id="UploadDocument" onClick="UploadDocument();">Upload</button>
            <button id="DownloadDocument" onClick="DownloadDocument();">Download</button>
            <button id="RunDocument" onClick="RunDocumentHandler();">Run</button>
        </div>
    </div>
    <p id="eiteDocumentRoot"></p>
</section>
</body>
</html>
